
@[TOC]

## 摘要
本篇博客介绍了在使用HBuilderX进行开发过程中，常遇到的隐私合规问题，并提供了相应的解决方案。主要包括违规收集个人信息和APP强制、频繁、过度索取权限两方面。
![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/b5fd70bd01a94bcc95a0d070367fbae0.png#pic_center)


## 引言
随着移动应用的快速发展，对隐私合规的要求越来越高。在我们常用的三个平台，苹果、华为和小米上发布应用时，都需要通过隐私合规检测。其中，苹果审核一般没有太大问题，华为也相对人性化。但是小米的隐私合规检测就比较严格了，每次更新都需要发布多个版本，修复文字和各种配置。

本文将介绍在使用HBuilderX进行开发时，遇到的一些隐私合规问题，并提供相应的解决方案。

## 正文

### 1、违规收集个人信息

在开发过程中，如果应用基于HBuilder框架，并引用了第三方的SDK，隐私声明中没有相关说明，就容易被拒绝。

针对这个问题，我们可以在隐私声明中添加如下文字：

```
本App使用可收集个人信息的第三方SDK如下:

1. MSA移动安全联盟SDK(图片处理com.asus.msa)
   - 使用目的：用于MSA移动安全联盟推送设备oaid生成
   - 收集的方式：自动收集
   - 收集的个人信息类型：唯一设备识别码
   - 所属公司/机构：MSA移动安全联盟

2. 阿里设备标识SDK(com.ta.utdid2)
   - 使用目的：用于阿里推送设备id生成
   - 收集的方式：自动收集
   - 收集的个人信息类型：唯一设备识别码
   - 所属公司/机构：阿里云计算有限公司

3. Facebook SDK(图片处理com.facebook.animated.gif)
   - 使用目的：App使用fresco图片加载框架
   - 收集的方式：自动收集
   - 收集的个人信息类型：IP地址和网络状态
   - 所属公司/机构：Facebook

4. 微信开放平台（com.tencent.mm）
   - 使用目的：用于微信授权登录
   - 收集的方式：自动收集
   - 收集的个人信息类型：硬件设备型号、操作系统及版本、应用列表
   - 所属公司/机构：深圳市腾讯计算机系统有限公司

5. 微信支付SDK
   - 使用目的：为用户提供在线支付服务
   - 收集的方式：自动收集
   - 收集的个人信息类型：设备标识符、硬件设备型号、软件版本信息、IP地址、位置信息、移动网络信息、存储读写权限
   - 所属公司/机构：财付通支付科技有限公司

6. 支付宝支付SDK
   - 使用目的：为用户提供在线支付服务
   - 收集的方式：自动收集
   - 收集的个人信息类型：设备状态及身份信息、位置信息、运营商信息、Wi-Fi地址、应用列表
   - 所属公司/机构：支付宝（杭州）信息技术有限公司

7. DCloud(io.dcloud)
   - 使用目的：广告投放合作，广告归因、反作弊、安全
   - 收集的方式：自动收集
   - 收集的个人信息类型：设备地理位置
   - 所属公司/机构：数字天堂（北京）网络技术有限公司

8. DCloud(io.dcloud)
   - 使用目的：提供统计分析服务，并通过应用启动数据及异常错误日志分析改进性能和用户体验，为用户提供更好的服务
   - 收集的方式：自动收集
   - 收集的个人信息类型：设备唯一识别码（IMEI/Android_ID/ANDROID ID/DEVICE_ID/IDFA、SIM序列号、OAID）
   - 所属公司/机构：数字天堂（北京）网络技术有限公司
```

### 2、APP强制、频繁、过度索取权限

在HBuilderX打包后，应用安装启动时会自动申请读写手机存储和获取设备信息权限。这两种权限都属于敏感权限，容易导致上架应用商店审核被拒。

针对这个问题，我们可以通过以下步骤进行解决：

1. 打开manifest.json文件，切换到“源码视图”项。
2. 对于uni-app项目，在 "app-plus" -> "distribute" -> "android" 节点下添加以下代码：
   ```
   "permissionPhoneState": {
       "request": "none",
       "prompt": "为保证您正常、安全地使用，需要获取设备识别码（部分手机提示为获取手机号码）使用权限，请允许。"
   },
   "permissionExternalStorage": {
       "request": "none",
       "prompt": "应用保存运行状态等信息，需要获取读写手机存储（系统提示为访问设备上的照片、媒体内容和文件）权限，请允许。"
   }
   ```
   对于5+ App项目，在 "plus" -> "distribute" -> "google" 节点下添加相同的代码。

通过以上步骤，我们可以关闭获取设备信息和读写手机存储权限的自动申请。

## 知识点补充
​
补充一个小知识点，iOS上架开发者可以借助appuploader工具进行安装测试。该工具可以通过扫码的方式将APP安装到手机上，同时提供了证书制作、描述文件制作、App提交和安装测试等功能，极大地简化了iOS应用上架的步骤。
![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/78f47b98191b46aa90123728bae45782.png)



​

## 总结
本文介绍了在使用HBuilderX进行开发过程中，常遇到的隐私合规问题，并提供了相应的解决方案。主要包括违规收集个人信息和APP强制、频繁、过度索取权限两方面。

为了顺利通过隐私合规检测，我们需要在隐私声明中明确列出涉及个人信息收集的第三方SDK，并关闭自动申请获取设备信息和读写手机存储权限的功能。


